(this["webpackJsonp18127136-18127269-moorssalc-frontend"]=this["webpackJsonp18127136-18127269-moorssalc-frontend"]||[]).push([[6],{235:function(e,t,r){"use strict";var n=r(236);r.o(n,"UserRole")&&r.d(t,"UserRole",(function(){return n.UserRole}));var a=r(237);r.o(a,"UserRole")&&r.d(t,"UserRole",(function(){return a.UserRole}))},236:function(e,t){},237:function(e,t){},238:function(e,t,r){"use strict";var n=r(239);r.o(n,"UserRole")&&r.d(t,"UserRole",(function(){return n.UserRole}));var a=r(240);r.o(a,"UserRole")&&r.d(t,"UserRole",(function(){return a.UserRole}))},239:function(e,t){},240:function(e,t){},241:function(e,t,r){"use strict";var n=r(242);r.o(n,"UserRole")&&r.d(t,"UserRole",(function(){return n.UserRole}));var a=r(243);r.o(a,"UserRole")&&r.d(t,"UserRole",(function(){return a.UserRole}));var o=r(244);r.d(t,"UserRole",(function(){return o.a}))},242:function(e,t){},243:function(e,t){},244:function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return n})),function(e){e.TEACHER="TEACHER",e.STUDENT="STUDENT",e.ADMIN="ADMIN"}(n||(n={}))},248:function(e,t,r){"use strict";var n=r(235);r.o(n,"UserRole")&&r.d(t,"UserRole",(function(){return n.UserRole}));var a=r(238);r.o(a,"UserRole")&&r.d(t,"UserRole",(function(){return a.UserRole}));var o=r(241);r.o(o,"UserRole")&&r.d(t,"UserRole",(function(){return o.UserRole}))},259:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(209),a=r(282),o=r(283),i=r(284),s=r(1),c=[{title:"Classes",icon:Object(s.jsx)(n.a,{}),href:"/",type:"item"},{title:"Calendar",icon:Object(s.jsx)(a.a,{}),href:"/",type:"item"},{title:"Teaching",type:"group",children:[{title:"To review",icon:Object(s.jsx)(o.a,{}),href:"/",type:"item"}]},{title:"Enrolled",type:"group",children:[{title:"To-do",icon:Object(s.jsx)(i.a,{}),href:"/",type:"item"}]}]},457:function(e,t,r){"use strict";r.r(t);var n=r(14),a=r(0),o=r.n(a),i=r(248),s=r(67),c=r(259),l=r(228),u=r(459),d=r(466),j=r(231),b=r(85),h=r(281),x=r(267),m=r(450),f=r(451),p=r(448),O=r(227),v=r(224),g=r(461),y=r(465),C=r(220),S=r(210),T=r(455),R=r(212),U=r(17),w=r.n(U),_=r(33),k=r(35),E=r(36),D=r(95),B=r(96),I=function(e){Object(D.a)(r,e);var t=Object(B.a)(r);function r(){var e;Object(k.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).resource="classes",e}return Object(E.a)(r,[{key:"getMyRole",value:function(){var e=Object(_.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._repository.get("".concat(this.resource,"/").concat(t,"/role"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getClassUsers",value:function(){var e=Object(_.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._repository.get("".concat(this.resource,"/").concat(t,"/people"));case 2:return e.abrupt("return",e.sent.data.users);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"submitInvitation",value:function(){var e=Object(_.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._repository.post("".concat(this.resource,"/invite"),t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getClassData",value:function(){var e=Object(_.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._repository.get("".concat(this.resource,"/").concat(t,"/role"));case 2:return e.t0=e.sent.data.role,e.next=5,this.getOne(t);case 5:return e.t1=e.sent,e.abrupt("return",{myRole:e.t0,data:e.t1});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(r(99).a),M={root:{width:"650px"},header:{py:1,mt:3,px:2,borderBottom:1,borderColor:"primary.main","& .MuiTypography-root":{color:"primary.main",fontSize:32},"& .MuiButtonBase-root":{color:"primary.main",width:48}}},W=r(12),N=r(456),z=r(430),A=r(249),F=r(250),V=r(1),q=F.a({email:F.c().email().required("Email is required")}),H=function(e){var t=e.open,r=e.title,n=e.handleClose,a=e.onSubmit,o=Object(A.a)({initialValues:{email:""},validateOnChange:!0,validationSchema:q,onSubmit:function(e){a(e.email)}});return Object(V.jsx)(s.e,{open:t,handleClose:n,title:r,width:300,children:Object(V.jsxs)(l.a,{component:"form",noValidate:!0,autoComplete:"off",onSubmit:o.handleSubmit,children:[Object(V.jsx)(b.a,{variant:"body2",gutterBottom:!0,component:"p",children:"Send an invitation link to this email"}),Object(V.jsx)(N.a,{id:"email",name:"email",label:"Enter email",variant:"standard",fullWidth:!0,sx:{mt:1,mb:2},value:o.values.email,onChange:o.handleChange,error:o.touched.email&&Boolean(o.errors.email),helperText:o.touched.email&&o.errors.email}),Object(V.jsxs)(p.a,{direction:"row",spacing:2,justifyContent:"flex-end",children:[Object(V.jsx)(z.a,{onClick:n,children:"Cancel"}),Object(V.jsx)(z.a,{type:"submit",children:"Invite"})]})]})})},G=r(86),J=r(48),P=function(e){var t=e.role,r=Object(W.f)().id,a=new I,s=Object(G.a)(),c=o.a.useState([]),l=Object(n.a)(c,2),u=l[0],d=l[1],j=o.a.useState(!1),h=Object(n.a)(j,2),U=h[0],w=h[1],_=o.a.useState(!1),k=Object(n.a)(_,2),E=k[0],D=k[1],B=function(e){a.getClassUsers(e).then((function(e){d(e)}))};o.a.useEffect((function(){r&&(console.log("log ~ file: index.tsx ~ line 27 ~ PeopleTab ~ id",r),B(r))}),[]);var N=function(e,t){a.submitInvitation({class_id:r,role:e,email:t}).then((function(e){console.log(e),r&&B(r),s(Object(J.d)({message:"Email submited!"}))})).catch((function(e){console.log("log ~ file: index.tsx ~ line 66 ~ .then ~ err",e),s(Object(J.d)({message:"Error when submitted invitation! Reason: "+e.message,type:"error"}))}))};return Object(V.jsxs)(x.a,{maxWidth:!1,sx:M.root,children:[["Teachers","Students"].map((function(e){return Object(V.jsxs)(o.a.Fragment,{children:[Object(V.jsxs)(p.a,{direction:"row",justifyContent:"space-between",sx:M.header,children:[Object(V.jsx)(b.a,{children:e}),t!==i.UserRole.STUDENT&&Object(V.jsx)(O.a,{onClick:function(){var t;t=e,console.log("log ~ file: index.tsx ~ line 48 ~ inviteBtnHandler ~ type",t),"Teachers"===t?w(!0):D(!0)},children:Object(V.jsx)(m.a,{})})]}),Object(V.jsx)(v.a,{children:u&&u.filter((function(r){return function(e,t){return"Teachers"===t?e!==i.UserRole.STUDENT:e===i.UserRole.STUDENT}(r.role,e)&&(t!==i.UserRole.STUDENT||"INACTIVATED"!==r.status)})).map((function(e,t){return Object(V.jsxs)(o.a.Fragment,{children:[Object(V.jsxs)(g.a,{alignItems:"flex-start",children:[Object(V.jsx)(y.a,{children:e.user_id.avatar?Object(V.jsx)(C.a,{alt:e.user_id.first_name,src:e.user_id.avatar,sx:{bgcolor:"primary.main"}}):Object(V.jsx)(C.a,{sx:{bgcolor:"primary.main"},children:e.user_id.first_name.charAt(0)})}),Object(V.jsx)(S.a,{primary:e.user_id.first_name+" "+e.user_id.last_name,secondary:Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(b.a,{sx:{display:"inline"},component:"span",variant:"body2",color:"text.primary",children:e.user_id.email}),"INACTIVATED"===e.status&&" - (Inviting)"]})}),Object(V.jsx)(T.a,{title:"Send Mail to ".concat(e.user_id.email),children:Object(V.jsx)(O.a,{href:"mailto:".concat(e.user_id.email),children:Object(V.jsx)(f.a,{})})})]}),Object(V.jsx)(R.a,{})]},t)}))})]},e)})),Object(V.jsx)(H,{title:"Invite Teachers",open:U,handleClose:function(){return w(!1)},onSubmit:function(e){N(i.UserRole.TEACHER,e),w(!1)}}),Object(V.jsx)(H,{title:"Invite students",open:E,handleClose:function(){return D(!1)},onSubmit:function(e){N(i.UserRole.STUDENT,e),D(!1)}})]})},K=r(452),L=r(453),Q=r(431),X=r(432),Y=r(230),Z=r(433),$={card_stack:{mt:"-98px",whiteSpace:"nowrap",justifyContent:"space-between",alignItems:"end","& .MuiIconButton-root":{mx:1,my:.5,color:"#fff"}},card:{borderRadius:2},header:{color:"#fff",width:{xs:"80%",md:"90%"},p:2,"& .MuiBox-root":{textOverflow:"ellipsis",overflow:"hidden"}},header_title:{fontSize:30,fontWeight:500},header_section:{fontSize:14},content:{p:3},expand_row:{gap:1,"& .MuiTypography-root:first-of-type":{fontWeight:500}}},ee=function(e){var t=e.classData,r=e.role,a=o.a.useState(!0),s=Object(n.a)(a,2),c=s[0],u=s[1];return Object(V.jsx)(l.a,{minHeight:"100vh",children:Object(V.jsxs)(Q.a,{sx:$.card,elevation:c?4:0,children:[Object(V.jsx)(X.a,{component:"img",height:"240",image:t.image,alt:"bg"}),Object(V.jsxs)(p.a,{spacing:2,direction:"row",sx:$.card_stack,children:[Object(V.jsxs)(l.a,{sx:$.header,children:[Object(V.jsx)(l.a,{sx:$.header_title,children:t.title}),Object(V.jsx)(l.a,{sx:$.header_section,children:t.section})]}),Object(V.jsx)(O.a,{onClick:function(){u((function(e){return!e}))},children:c?Object(V.jsx)(K.a,{}):Object(V.jsx)(L.a,{})})]}),Object(V.jsx)(Y.a,{in:c,children:Object(V.jsxs)(Z.a,{sx:$.content,children:[r!==i.UserRole.STUDENT&&Object(V.jsxs)(p.a,{direction:"row",sx:$.expand_row,children:[Object(V.jsx)(b.a,{variant:"body2",children:"Class code"}),Object(V.jsx)(b.a,{variant:"body2",children:t.code})]}),(null===t||void 0===t?void 0:t.subject)&&Object(V.jsxs)(p.a,{direction:"row",sx:$.expand_row,children:[Object(V.jsx)(b.a,{variant:"body2",children:"Subject"}),Object(V.jsx)(b.a,{variant:"body2",children:t.subject})]}),(null===t||void 0===t?void 0:t.room)&&Object(V.jsxs)(p.a,{direction:"row",sx:$.expand_row,children:[Object(V.jsx)(b.a,{variant:"body2",children:"Room"}),Object(V.jsx)(b.a,{variant:"body2",children:t.room})]})]})})]})})},te=function(){return Object(V.jsx)("div",{children:"Classwork Tab"})},re=r(427),ne={root:{width:"100vw",height:"100vh",bgcolor:"background.paper"},toolbar:{borderBottom:1,borderColor:"divider","& .MuiTypography-root":{fontWeight:500},"& .MuiButton-root":{ml:"auto",textTransform:"capitalize"}},container:{maxWidth:"700px"},form:{mt:3,p:3,border:1,borderColor:"divider",borderRadius:2,"& .MuiTypography-root":{fontSize:"24px",mb:1},"& .MuiTextField-root":{my:1}}},ae=r(428),oe=r.n(ae),ie=r(217),se=r(215),ce=r(226),le=r(429),ue=r.n(le),de=F.a({title:F.c().min(1,"Classroom Title should be of 1-100 characters length").max(100,"Classroom Title should be of 1-100 characters length").required("Classroom Title is required"),section:F.c().min(1,"Section should be of 1-50 characters length").max(50,"Section should be of 1-50 characters length"),subject:F.c().min(1,"Subject should be of 1-50 characters length").max(50,"Subject should be of 1-50 characters length"),room:F.c().min(1,"Room should be of 1-50 characters length").max(50,"Room should be of 1-50 characters length")}),je=function(e){Object(re.a)(e);var t=o.a.useState(!1),r=Object(n.a)(t,2),a=r[0],i=r[1],s=Object(A.a)({initialValues:{title:"",room:"",section:"",subject:""},validateOnBlur:!0,validationSchema:de,onSubmit:function(e){console.log("log ~ file: index.tsx ~ line 39 ~ ClassroomSetting ~ values",e)}});return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(O.a,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(){return i(!0)},color:"inherit",children:Object(V.jsx)(oe.a,{sx:{fontSize:24}})}),Object(V.jsx)(ie.a,{open:a,onClose:function(){return i(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(V.jsx)(se.a,{in:a,timeout:300,children:Object(V.jsxs)(l.a,{sx:ne.root,children:[Object(V.jsxs)(ce.a,{sx:ne.toolbar,children:[Object(V.jsx)(O.a,{size:"large",edge:"start",color:"inherit","aria-label":"close modal",onClick:function(){return i(!1)},children:Object(V.jsx)(ue.a,{sx:{fontSize:20}})}),Object(V.jsx)(b.a,{variant:"body1",children:"Classroom setting"}),Object(V.jsx)(z.a,{variant:"contained",children:"Save"})]}),Object(V.jsx)(x.a,{maxWidth:!1,sx:ne.container,children:Object(V.jsxs)(l.a,{sx:ne.form,component:"form",noValidate:!0,autoComplete:"off",onSubmit:s.handleSubmit,children:[Object(V.jsx)(b.a,{color:"primary",children:"Class Details"}),Object(V.jsx)(N.a,{id:"title",name:"title",label:"Class name (required)",variant:"filled",fullWidth:!0,value:s.values.title,onChange:s.handleChange,error:s.touched.title&&Boolean(s.errors.title),helperText:s.touched.title&&s.errors.title}),Object(V.jsx)(N.a,{id:"section",name:"section",label:"Section",variant:"filled",fullWidth:!0,onChange:s.handleChange,value:s.values.section,error:s.touched.section&&Boolean(s.errors.section),helperText:s.touched.section&&s.errors.section}),Object(V.jsx)(N.a,{id:"subject",name:"subject",label:"Subject",variant:"filled",fullWidth:!0,onChange:s.handleChange,value:s.values.subject,error:s.touched.subject&&Boolean(s.errors.subject),helperText:s.touched.subject&&s.errors.subject}),Object(V.jsx)(N.a,{id:"room",name:"room",label:"Room",variant:"filled",fullWidth:!0,onChange:s.handleChange,value:s.values.room,error:s.touched.room&&Boolean(s.errors.room),helperText:s.touched.room&&s.errors.room})]})})]})})})]})},be={tabsContainer:{borderBottom:1,borderColor:"divider",flexGrow:1,display:"flex",justifyContent:"center",mt:{xs:0,md:-8},mb:"-2px","& .MuiTab-root":{height:64,justifyContent:"center",alignItems:"center",textTransform:"capitalize",fontWeight:"semibold",fontSize:14,px:3,transition:"background-color 400ms ease-in-out",":hover":{bgcolor:"grey.100"}}},link:{color:"text.primary",borderColor:"divider"},progressBar:{mt:"-3px"}},he={container:{mt:4,p:"0 !important",maxWidth:"1000px"}};t.default=function(){var e=Object(W.f)().id,t=Object(W.e)(),r=Object(G.a)(),a=new I,m=Object(s.g)().userData,f=o.a.useState(!0),p=Object(n.a)(f,2),O=p[0],v=p[1],g=o.a.useState(0),y=Object(n.a)(g,2),C=y[0],S=y[1],T=o.a.useState(null),R=Object(n.a)(T,2),U=R[0],w=R[1],_=o.a.useState(i.UserRole.STUDENT),k=Object(n.a)(_,2),E=k[0],D=k[1];return o.a.useEffect((function(){e&&a.getClassData(e).then((function(e){var t=e.data,r=e.myRole;w(t),D(r),v(!1)})).catch((function(e){r(Object(J.d)({message:"Cannot find class",type:"error"})),v(!1),t("/not-found")}))}),[]),Object(V.jsxs)(o.a.Fragment,{children:[Object(V.jsxs)(s.b,{items:c.a,toolbarComponents:Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(l.a,{sx:be.tabsContainer,children:Object(V.jsxs)(u.a,{value:C,onChange:function(e,t){S(t)},"aria-label":"basic tabs example",children:[Object(V.jsx)(d.a,{label:"Stream",id:"one"}),Object(V.jsx)(d.a,{label:"Classwork",id:"two"}),Object(V.jsx)(d.a,{label:"People",id:"three"})]})}),O&&Object(V.jsx)(j.a,{sx:be.progressBar})]}),children:[Object(V.jsx)(b.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:Object(V.jsx)(h.a,{underline:"hover",href:"/",sx:be.link,children:U&&U.title})}),Object(V.jsxs)(l.a,{children:[Object(V.jsx)(je,{}),m&&Object(V.jsx)(s.d,{fname:m.first_name,imageUrl:m.avatar})]})]}),!O&&U&&E&&Object(V.jsxs)(x.a,{maxWidth:!1,sx:he.container,children:[Object(V.jsx)(s.f,{value:C,index:0,children:Object(V.jsx)(ee,{role:E,classData:U})}),Object(V.jsx)(s.f,{value:C,index:1,children:Object(V.jsx)(te,{})}),Object(V.jsx)(s.f,{value:C,index:2,children:Object(V.jsx)(P,{role:E})})]})]})}}}]);
//# sourceMappingURL=6.6f767d81.chunk.js.map