(this["webpackJsonp18127136-18127269-moorssalc-frontend"]=this["webpackJsonp18127136-18127269-moorssalc-frontend"]||[]).push([[1],{163:function(e,t,n){},164:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(37),c=n.n(o),i=n(231),s=n(67),u={palette:{},typography:{fontFamily:["Poppins","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")}},l=n(12),h=n(86),d=n(48),f=n(44),b=n(73),j=n(35),p=n(36),g=function(){function e(){Object(j.a)(this,e)}return Object(p.a)(e,null,[{key:"filterArrayByString",value:function(e,t){var n=this;return""===t?e:(t=t.toLowerCase(),e.filter((function(e){return n.searchInObj(e,t)})))}},{key:"searchInObj",value:function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if("string"===typeof r){if(this.searchInString(r,t))return!0}else if(Array.isArray(r)&&this.searchInArray(r,t))return!0;if("object"===typeof r&&this.searchInObj(r,t))return!0}return!1}},{key:"searchInArray",value:function(e,t){var n,r=Object(b.a)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if("string"===typeof a&&this.searchInString(a,t))return!0;if("object"===typeof a&&this.searchInObj(a,t))return!0}}catch(o){r.e(o)}finally{r.f()}return!1}},{key:"searchInString",value:function(e,t){return e.toLowerCase().includes(t)}},{key:"generateGUID",value:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()}},{key:"toggleInArray",value:function(e,t){-1===t.indexOf(e)?t.push(e):t.splice(t.indexOf(e),1)}},{key:"sanitizeString",value:function(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/\W+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}},{key:"stringToSlug",value:function(e){return e.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,"")}},{key:"findById",value:function(e,t){if(e.id===t)return e;var n,r;for(r in e)if(e.hasOwnProperty(r)&&"object"===typeof e[r]&&(n=this.findById(e[r],t)))return n;return null}},{key:"randomMatColor",value:function(e){e=e||"400";var t=["amber","blue","blueGrey","brown","common","cyan","deepOrange","deepPurple","green","grey","indigo","lightBlue","lightGreen","lime","orange","pink","purple","red","teal","yellow"];return[t[Math.floor(Math.random()*t.length)],e]}},{key:"getParameterByName",value:function(e,t){e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}}]),e}(),O=n(1),m=a.a.lazy((function(){return Promise.all([n.e(0),n.e(5),n.e(7)]).then(n.bind(null,458))})),v=a.a.lazy((function(){return Promise.all([n.e(0),n.e(11),n.e(13)]).then(n.bind(null,464))})),y=a.a.lazy((function(){return Promise.all([n.e(0),n.e(10)]).then(n.bind(null,449))})),x=a.a.lazy((function(){return Promise.all([n.e(0),n.e(4),n.e(6)]).then(n.bind(null,457))})),w=a.a.lazy((function(){return Promise.all([n.e(0),n.e(9)]).then(n.bind(null,462))})),k=a.a.lazy((function(){return n.e(8).then(n.bind(null,467))})),S=a.a.lazy((function(){return n.e(12).then(n.bind(null,468))})),_=function(e){var t=e.children;return Object(O.jsx)(a.a.Suspense,{fallback:Object(O.jsx)(i.a,{}),children:t})},I=function(e){var t=e.isAuthed,n=e.children;e.search;return t?Object(O.jsx)(_,{children:n}):Object(O.jsx)(l.a,{to:"/auth/login?redirect="+encodeURIComponent(window.location.pathname+window.location.search)})},C=function(e){var t=e.isAuthed,n=e.children,r=e.search,a=void 0===r?"":r,o=g.getParameterByName("redirect",a);return t?Object(O.jsx)(l.a,{to:o||"/"}):Object(O.jsx)(_,{children:n})},P=function(e,t){return[{path:"/",element:Object(O.jsx)(I,{isAuthed:e,search:t,children:Object(O.jsx)(m,{})})},{path:"/classroom/:id",element:Object(O.jsx)(I,{isAuthed:e,search:t,children:Object(O.jsx)(x,{})})},{path:"/profile",element:Object(O.jsx)(I,{isAuthed:e,search:t,children:Object(O.jsx)(w,{})})},{path:"/classes/join",element:Object(O.jsx)(I,{isAuthed:e,search:t,children:Object(O.jsx)(k,{})})},{path:"/auth",element:Object(O.jsx)(l.a,{to:"/auth/login"})},{path:"/auth/login",element:Object(O.jsx)(C,{isAuthed:e,search:t,children:Object(O.jsx)(v,{})})},{path:"/auth/register",element:Object(O.jsx)(C,{isAuthed:e,search:t,children:Object(O.jsx)(y,{})})},{path:"/not-found",element:Object(O.jsx)(_,{children:Object(O.jsx)(S,{})})},{path:"*",element:Object(O.jsx)(l.a,{to:"/not-found"})}]};var A=function(){var e=Object(h.a)(),t=Object(l.d)().search,n=Object(h.b)((function(e){return e.message})),r=n.message,o=n.type,c=Object(f.c)(),b=c.isAuthenticated,j=c.pending,p=Object(l.h)(P(b,t));return Object(O.jsxs)(a.a.Fragment,{children:[Object(O.jsx)(s.c,{open:""!==r,msg:r,severity:o,handleClose:function(){return e(Object(d.a)())}}),Object(O.jsx)(f.b,{themeConfig:u,children:j?Object(O.jsx)(i.a,{}):p})]})},z=function(e){e&&e instanceof Function&&n.e(14).then(n.bind(null,454)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),o(e),c(e)}))},T=(n(163),n(216)),L=n(62),B=n(15),E=n(28),M={loading:d.b,message:d.c,theme:d.e};function D(e){return Object(E.b)(Object(B.a)(Object(B.a)({},M),e))}var R=Object(E.d)(D({}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());R.asyncReducers={};var U=n(55);c.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(s.a,{children:Object(O.jsxs)(L.a,{store:R,children:[Object(O.jsx)(T.a,{}),Object(O.jsx)(U.a,{children:Object(O.jsx)(A,{})})]})})}),document.getElementById("root")),z()},32:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(78),a=n.n(r),o="".concat("https://moorssalc.herokuapp.com","/").concat("api","/").concat("v1"),c=a.a.create({baseURL:o,withCredentials:!0})},44:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return _})),n.d(t,"c",(function(){return I}));var r=n(121),a=n(221),o=n(0),c=n.n(o),i=n(1),s=function(e){var t=e.children,n=e.themeConfig,o=Object(r.a)(n);return Object(i.jsx)(a.a,{theme:o,children:t})},u=n(15),l=n(14),h=n(32),d=n(35),f=n(36),b="jwt_access_token",j="jwt_refresh_token",p=n(93),g=function(){function e(){Object(d.a)(this,e),this.isAuthTokenValid=function(e){if(!e)return!1;var t=Object(p.a)(e),n=Date.now()/1e3;return!(t.exp<n)||(console.warn("access token expired"),!1)},this._setSession=function(e,t){e?(localStorage.setItem(b,e),h.a.defaults.headers.common.Authorization="Bearer "+e):(localStorage.removeItem(b),delete h.a.defaults.headers.common.Authorization),t?localStorage.setItem(j,t):localStorage.removeItem(j)}}return Object(f.a)(e,[{key:"init",value:function(e,t){var n=this,r=localStorage.getItem(b),a=localStorage.getItem(j);h.a.interceptors.response.use((function(e){return e}),(function(e){return 401===e.response.status&&e.config&&!e.config.__isRetryRequest&&(n._setSession(null,null),t()),Promise.reject(e.response.data)})),this.isAuthTokenValid(r)?(this._setSession(r,a),e()):(this._setSession(null,null),t())}},{key:"logIn",value:function(e){var t=this;return new Promise((function(n,r){h.a.post("/auth/login",e).then((function(e){if(e.data){var r=e.data.access_token,a=e.data.refresh_token;t._setSession(r,a),n(e.data)}})).catch((function(e){return r(e)}))}))}},{key:"register",value:function(e){var t=this;return new Promise((function(n,r){h.a.post("/auth/register",e).then((function(e){if(e){var r=e.data.access_token,a=e.data.refresh_token;t._setSession(r,a),n(e.data)}})).catch((function(e){return r(e)}))}))}},{key:"logOut",value:function(){var e=this,t=localStorage.getItem(j);return new Promise((function(n,r){h.a.post("/auth/logout",{refresh_token:t}).then((function(t){e._setSession(null,null),n(t.data)})).catch((function(e){return r(e)}))}))}},{key:"getUserData",value:function(){var e=localStorage.getItem(b),t=Object(p.a)(e);return new Promise((function(e,n){h.a.get("/users/".concat(null===t||void 0===t?void 0:t._id)).then((function(t){t.data&&e(t.data)})).catch((function(e){return n(e)}))}))}}]),e}(),O=n(17),m=n.n(O),v=n(33),y=n(95),x=n(96),w=function(e){Object(y.a)(n,e);var t=Object(x.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).resource="/auth/google-activate",e._setSession=function(t,n){t?(localStorage.setItem(b,t),e._repository.defaults.headers.common.Authorization="Bearer "+t):(localStorage.removeItem(b),delete e._repository.defaults.headers.common.Authorization),n?localStorage.setItem(j,n):localStorage.removeItem(j)},e}return Object(f.a)(n,[{key:"validateToken",value:function(){var e=Object(v.a)(m.a.mark((function e(t){var n,r=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={token_id:t},e.abrupt("return",new Promise((function(e,t){r._repository.post("".concat(r.resource),n).then((function(t){if(t.data){console.log("log ~ file: google.service.ts ~ line 16 ~ GoogleValidateService ~ .then ~ response.data",t.data);var n=t.data.access_token,a=t.data.refresh_token;r._setSession(n,a),e(t.data)}})).catch((function(e){return t(e)}))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(n(99).a),k={signIn:function(){return new Promise((function(){}))},signInWithGG:function(){return new Promise((function(){}))},register:function(){return new Promise((function(){}))},logOut:function(){},reload:function(){},isAuthenticated:!1,pending:!0,userData:void 0},S=c.a.createContext(k),_=function(e){var t=e.children,n=c.a.useState(void 0),r=Object(l.a)(n,2),a=r[0],o=r[1],s=c.a.useState(!1),d=Object(l.a)(s,2),f=d[0],b=d[1],j=c.a.useState(!0),p=Object(l.a)(j,2),O=p[0],m=p[1],v=new g,y=new w,x=function(){v.init(_,I)};c.a.useEffect((function(){console.log("Check Auth"),h.a.get("/",{withCredentials:!0}),x()}),[]);var _=function(){console.log("~ onAutoLogIn"),v.getUserData().then((function(e){b(!0),m(!1),o(e)})).catch((function(e){console.error(e)}))},I=function(){console.log("~ onAutoLogOut"),b(!1),m(!1),o(void 0)},C=Object(u.a)(Object(u.a)({},k),{},{signIn:function(e){return new Promise((function(t,n){v.logIn(e).then((function(e){_(),t(e)})).catch((function(e){return n(e)}))}))},signInWithGG:function(e){return new Promise((function(t,n){y.validateToken(e).then((function(e){b(!0),m(!1),o(e.data),t(e)})).catch((function(e){n(e)}))}))},register:function(e){return new Promise((function(t,n){v.register(e).then((function(){_(),t(e)})).catch((function(e){n(e)}))}))},logOut:function(){return b(!1),v.logOut().then(I)},reload:x,isAuthenticated:f,pending:O,userData:a});return Object(i.jsx)(S.Provider,{value:C,children:t})},I=function(){return c.a.useContext(S)}},48:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return d})),n.d(t,"e",(function(){return j}));var r=n(52),a=Object(r.a)({name:"loading",initialState:{isLoading:!1},reducers:{showLoading:function(e,t){return{isLoading:t.payload}}}}),o=(a.actions.showLoading,a.reducer),c=n(15),i={message:"",type:"success"},s=Object(r.a)({name:"message",initialState:i,reducers:{showMessage:function(e,t){return Object(c.a)(Object(c.a)({},i),t.payload)},hideMessage:function(e){return i}}}),u=s.actions,l=u.showMessage,h=u.hideMessage,d=s.reducer,f=Object(r.a)({name:"theme",initialState:{theme:"light"},reducers:{setTheme:function(e,t){var n=t.payload.theme;return localStorage.setItem("theme",n),{theme:n}},getTheme:function(e){return{theme:localStorage.getItem("theme")||"light"}}}}),b=f.actions,j=(b.setTheme,b.getTheme,f.reducer)},67:function(e,t,n){"use strict";n.d(t,"b",(function(){return w})),n.d(t,"a",(function(){return k.a})),n.d(t,"g",(function(){return k.c})),n.d(t,"e",(function(){return z})),n.d(t,"d",(function(){return E})),n.d(t,"f",(function(){return D})),n.d(t,"c",(function(){return W}));var r=n(14),a=n(0),o=n.n(a),c=n(225),i=n(226),s=n(201),u=n(222),l=n(224),h=n(207),d=n(208),f=n(210),b=n(212),j=n(227),p={bgcolor:"background.paper",color:"text.primary",borderBottom:1,borderColor:"divider"},g={list:{width:300,px:1},btnItem:{fontWeight:500,fontSize:16,height:56},textItem:{height:40,"& .MuiTypography-root":{fontWeight:500,fontSize:14,letterSpacing:".5px"}}},O=n(214),m=n(209),v=n(213),y=n(12),x=n(1),w=function(e){var t=e.children,n=(e.items,e.toolbarComponents),o=Object(s.a)({disableHysteresis:!0,threshold:0}),w=a.useState(!1),k=Object(r.a)(w,2),S=k[0],_=k[1],I=Object(y.e)(),C=function(e){return function(t){("keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&_(e)}};return Object(x.jsxs)(a.Fragment,{children:[Object(x.jsx)(u.a,{anchor:"left",open:S,onClose:C(!1),children:Object(x.jsxs)(l.a,{sx:g.list,role:"presentation",onKeyDown:C(!1),children:[Object(x.jsxs)(h.a,{sx:g.btnItem,onClick:function(){return I("/")},children:[Object(x.jsx)(d.a,{children:Object(x.jsx)(m.a,{})}),Object(x.jsx)(f.a,{primary:"Classes"})]}),Object(x.jsx)(b.a,{}),Object(x.jsxs)(h.a,{sx:g.btnItem,onClick:function(){return I("/profile")},children:[Object(x.jsx)(d.a,{children:Object(x.jsx)(v.a,{})}),Object(x.jsx)(f.a,{primary:"Profile Setting"})]})]})}),Object(x.jsxs)(c.a,{elevation:o?4:0,sx:p,children:[Object(x.jsxs)(i.a,{children:[Object(x.jsx)(j.a,{size:"large",edge:"start",color:"inherit","aria-label":"open drawer",onClick:C(!0),children:Object(x.jsx)(O.a,{})}),t]}),n]}),Object(x.jsx)(i.a,{})]})},k=n(44),S=n(15),_=n(79),I=n(217),C=n(228),P=n(85),A={root:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",borderRadius:2,boxShadow:24,p:3,pb:1},title:{fontSize:16,fontWeight:"bold"}},z=function(e){var t=e.open,n=e.handleClose,r=e.title,a=e.children,o=Object(_.a)(e,["open","handleClose","title","children"]);return Object(x.jsx)(I.a,{open:t,onClose:n,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(x.jsxs)(C.a,Object(S.a)(Object(S.a)({sx:A.root},o),{},{children:[Object(x.jsx)(P.a,{id:"modal-modal-title",sx:A.title,gutterBottom:!0,children:r}),a]}))})},T=n(220),L=n(176),B=n(229),E=function(e){var t=e.fname,n=e.imageUrl,a=Object(k.c)().logOut,c=Object(y.e)(),i=o.a.useState(null),s=Object(r.a)(i,2),u=s[0],l=s[1];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(j.a,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){l(e.currentTarget)},color:"inherit",children:n&&""!==n?Object(x.jsx)(T.a,{sx:{width:32,height:32},alt:t,src:n}):Object(x.jsx)(T.a,{sx:{width:32,height:32,bgcolor:"primary.main"},children:t.charAt(0)})}),Object(x.jsxs)(L.a,{id:"menu-profile",anchorEl:u,MenuListProps:{"aria-labelledby":"profile-button"},open:Boolean(u),anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:function(){return l(null)},keepMounted:!0,children:[Object(x.jsx)(B.a,{onClick:function(){l(null),c("/profile")},children:"Profile"}),Object(x.jsx)(B.a,{onClick:function(){l(null),a()},children:"Logout"})]})]})},M=n(230),D=function(e){var t=e.children,n=e.value,r=e.index,a=Object(_.a)(e,["children","value","index"]);return Object(x.jsx)(M.a,{in:n===r,timeout:500,children:Object(x.jsx)("div",Object(S.a)(Object(S.a)({role:"tabpanel",id:"tabpanel-".concat(r),"aria-labelledby":"-tab-".concat(r)},a),{},{children:n===r&&t}))})},R=n(219),U=n(206),F=n(218),W=function(e){var t=e.open,n=e.msg,r=e.severity,a=void 0===r?"success":r,o=e.handleClose;return Object(x.jsx)(R.a,{open:t,autoHideDuration:4e3,onClose:o,anchorOrigin:{vertical:"bottom",horizontal:"center"},TransitionComponent:function(e){return Object(x.jsx)(U.a,Object(S.a)(Object(S.a)({},e),{},{direction:"up"}))},sx:{minWidth:"300px"},children:Object(x.jsx)(F.a,{onClose:o,severity:a,sx:{width:"100%"},children:n})})}},86:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var r=n(62),a=function(){return Object(r.b)()},o=r.c},99:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(15),a=n(17),o=n.n(a),c=n(33),i=n(35),s=n(36),u=n(78),l=n.n(u),h=n(32),d={page:1,per_page:10,sort_by:"created_at",sort_order:"desc"},f=function(){function e(){Object(i.a)(this,e),this.resource="",this._repository=h.a}return Object(s.a)(e,[{key:"get",value:function(){var e=Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._repository.get("".concat(this.resource," "));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWithPagination",value:function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._repository.get("".concat(this.resource,"/").concat(b(Object(r.a)(Object(r.a)({},d),t))));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getOne",value:function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._repository.get("".concat(this.resource,"/").concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getWithCustomQuery",value:function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._repository.get("".concat(this.resource).concat(b(t)));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"create",value:function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._repository.post("".concat(this.resource),t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(c.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._repository.put("".concat(this.resource,"/").concat(t),n);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._repository.delete("".concat(this.resource,"/").concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"customRequest",value:function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l()(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),b=function(e){return new URLSearchParams(e).toString()}}},[[164,2,3]]]);
//# sourceMappingURL=main.e9ad9455.chunk.js.map